{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///webpack/bootstrap 5d7f40c1f7facee0a229","webpack:///./src/Branch.js","webpack:///external \"babel-polyfill\"","webpack:///./src/index.js","webpack:///./src/convertToBranches.js","webpack:///./src/executeBranch.js","webpack:///external \"bluebird\""],"names":["Branch","name","condition","action","value","branches","exceptionHandler","TypeError","chainBranches","slice","branch","chainBranch","push","newCondition","newAction","newName","find","getName","searchName","getBranch","Object","keys","reduce","foundBranch","branchName","findBranch","convertToBranches","convertToBranch","map","executeBranch","currentBranch","resolve","then","conditionResult","executeBranchAction","executeChain","getChain","getBranchByCondition","getBranches","actionResult","childBranch","err","reject","index","length","branchCondition","getCondition","isExceptionHandler","branchValue"],"mappings":"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","file":"index.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse {\n\t\tvar a = factory();\n\t\tfor(var i in a) (typeof exports === 'object' ? exports : root)[i] = a[i];\n\t}\n})(typeof self !== 'undefined' ? self : this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 1);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 5d7f40c1f7facee0a229","import { convertToBranches, convertToBranch } from \"./convertToBranches\";\nimport executeBranch from \"./executeBranch\";\nexport default class Branch {\n    constructor({\n        name,\n        condition = () => true,\n        action = value => value,\n        branches = [],\n        exceptionHandler = false\n    } = {}) {\n        if (!name) {\n            throw TypeError(\"Name should be provided\");\n        }\n        this.name = name;\n        this.condition = condition;\n        this.action = action;\n        this.exceptionHandler = exceptionHandler;\n        this.branches = convertToBranches(branches);\n        this.chainBranches = [];\n    }\n    clone() {\n        return new Branch({\n            name: this.name,\n            condition: this.condition,\n            action: this.action,\n            exceptionHandler: this.exceptionHandler,\n            branches: this.branches.slice()\n        });\n    }\n    chain(branch) {\n        const chainBranch = convertToBranch(branch);\n        this.chainBranches.push(chainBranch);\n        return this;\n    }\n    getChain() {\n        return this.chainBranches;\n    }\n    isExceptionHandler() {\n        return this.exceptionHandler;\n    }\n    setCondition(newCondition) {\n        this.condition = newCondition;\n        return this;\n    }\n    setAction(newAction) {\n        this.action = newAction;\n        return this;\n    }\n    setName(newName) {\n        this.name = newName;\n        return this;\n    }\n    addBranch(branch) {\n        this.branches.push(convertToBranch(branch));\n        return this;\n    }\n    getBranches() {\n        return this.branches;\n    }\n    getBranch(name) {\n        return this.branches.find(branch => branch.getName() === name) || null;\n    }\n    findBranch(searchName) {\n        return (\n            this.getBranch(searchName) ||\n            Object.keys(this.branches).reduce(\n                (foundBranch, branchName) => foundBranch || this.branches[branchName].findBranch(searchName),\n                null\n            )\n        );\n    }\n    getAction() {\n        return this.action;\n    }\n    getCondition() {\n        return this.condition;\n    }\n    getName() {\n        return this.name;\n    }\n    execute(value) {\n        return executeBranch(value, { branch: this });\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/Branch.js","module.exports = require(\"babel-polyfill\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"babel-polyfill\"\n// module id = 2\n// module chunks = 0","import Branch from \"./Branch\";\nexport default {\n    Branch\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/index.js","import Branch from \"./Branch\";\nexport function convertToBranches(branches) {\n    return branches.map(convertToBranch);\n}\nexport function convertToBranch(branch) {\n    if (branch instanceof Branch) {\n        return branch;\n    } else {\n        return new Branch(branch);\n    }\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/convertToBranches.js","import Promise from \"bluebird\";\nexport default function executeBranch(value, { branch: currentBranch }) {\n    return Promise.resolve()\n        .then(() => currentBranch.condition(value))\n        .then(conditionResult => (conditionResult ? executeBranchAction(value, { branch: currentBranch }) : value))\n        .then(value => executeChain(currentBranch.getChain(), value));\n}\n\nfunction executeBranchAction(value, { branch: currentBranch }) {\n    return Promise.resolve()\n        .then(() => currentBranch.action(value))\n        .then(\n            actionResult =>\n                getBranchByCondition(currentBranch.getBranches(), actionResult, 0, false).then(\n                    childBranch =>\n                        childBranch ? executeBranchAction(actionResult, { branch: childBranch }) : actionResult\n                ),\n            err =>\n                getBranchByCondition(currentBranch.getBranches(), err, 0, true).then(\n                    childBranch =>\n                        childBranch ? executeBranchAction(err, { branch: childBranch }) : Promise.reject(err)\n                )\n        );\n}\n\nfunction getBranchByCondition(branches, value, index = 0, exceptionHandler) {\n    if (branches.length <= index) {\n        return Promise.resolve(null);\n    }\n    const branch = branches[index];\n    const branchCondition = branch.getCondition();\n    return Promise.resolve()\n        .then(() => branch.isExceptionHandler() === exceptionHandler && branchCondition(value))\n        .then(\n            branchValue =>\n                branchValue\n                    ? Promise.resolve(branch)\n                    : getBranchByCondition(branches, value, index + 1, exceptionHandler)\n        );\n}\n\nfunction executeChain(branches, value, index = 0) {\n    if (branches.length <= index) {\n        return Promise.resolve(value);\n    }\n    const branch = branches[index];\n    return executeBranch(value, { branch }).then(value => executeChain(branches, value, index + 1));\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/executeBranch.js","module.exports = require(\"bluebird\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"bluebird\"\n// module id = 6\n// module chunks = 0"],"sourceRoot":""}